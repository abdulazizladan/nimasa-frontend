<div class="settings-container" fxLayout="column" fxLayoutGap="24px">

    <h1>Settings</h1>

    <!-- Profile Section -->
    <mat-card class="settings-card">
        <mat-card-header>
            <mat-card-title>
                <mat-icon>person</mat-icon>
                Profile Information
            </mat-card-title>
        </mat-card-header>
        <mat-card-content>
            <form [formGroup]="profileForm" (ngSubmit)="onUpdateProfile()" fxLayout="column" fxLayoutGap="16px">
                <mat-form-field appearance="outline">
                    <mat-label>Email</mat-label>
                    <input matInput formControlName="email" type="email">
                    <mat-icon matPrefix>email</mat-icon>
                </mat-form-field>

                <div fxLayout="row" fxLayoutGap="16px" fxLayout.lt-md="column">
                    <mat-form-field appearance="outline" fxFlex>
                        <mat-label>First Name</mat-label>
                        <input matInput formControlName="firstName">
                        <mat-icon matPrefix>badge</mat-icon>
                    </mat-form-field>

                    <mat-form-field appearance="outline" fxFlex>
                        <mat-label>Last Name</mat-label>
                        <input matInput formControlName="lastName">
                        <mat-icon matPrefix>badge</mat-icon>
                    </mat-form-field>
                </div>

                <mat-form-field appearance="outline">
                    <mat-label>Phone Number</mat-label>
                    <input matInput formControlName="phone" type="tel">
                    <mat-icon matPrefix>phone</mat-icon>
                </mat-form-field>

                <div fxLayout="row" fxLayoutAlign="end center">
                    <button mat-raised-button color="primary" type="submit" [disabled]="!profileForm.valid">
                        <mat-icon>save</mat-icon>
                        Update Profile
                    </button>
                </div>
            </form>
        </mat-card-content>
    </mat-card>

    <!-- Change Password Section -->
    <mat-card class="settings-card">
        <mat-card-header>
            <mat-card-title>
                <mat-icon>lock</mat-icon>
                Change Password
            </mat-card-title>
        </mat-card-header>
        <mat-card-content>
            <form [formGroup]="changePasswordForm" (ngSubmit)="onChangePassword()" fxLayout="column" fxLayoutGap="16px">
                <mat-form-field appearance="outline">
                    <mat-label>Current Password</mat-label>
                    <input matInput formControlName="currentPassword" type="password">
                    <mat-icon matPrefix>lock_outline</mat-icon>
                    <mat-error *ngIf="changePasswordForm.get('currentPassword')?.hasError('required')">
                        Current password is required
                    </mat-error>
                    <mat-error *ngIf="changePasswordForm.get('currentPassword')?.hasError('minlength')">
                        Password must be at least 6 characters
                    </mat-error>
                </mat-form-field>

                <mat-form-field appearance="outline">
                    <mat-label>New Password</mat-label>
                    <input matInput formControlName="newPassword" type="password">
                    <mat-icon matPrefix>lock</mat-icon>
                    <mat-error *ngIf="changePasswordForm.get('newPassword')?.hasError('required')">
                        New password is required
                    </mat-error>
                    <mat-error *ngIf="changePasswordForm.get('newPassword')?.hasError('minlength')">
                        Password must be at least 6 characters
                    </mat-error>
                </mat-form-field>

                <mat-form-field appearance="outline">
                    <mat-label>Confirm New Password</mat-label>
                    <input matInput formControlName="confirmPassword" type="password">
                    <mat-icon matPrefix>lock</mat-icon>
                    <mat-error *ngIf="changePasswordForm.get('confirmPassword')?.hasError('required')">
                        Please confirm your password
                    </mat-error>
                    <mat-error
                        *ngIf="changePasswordForm.hasError('passwordMismatch') && changePasswordForm.get('confirmPassword')?.touched">
                        Passwords do not match
                    </mat-error>
                </mat-form-field>

                <div fxLayout="row" fxLayoutAlign="end center">
                    <button mat-raised-button color="primary" type="submit" [disabled]="!changePasswordForm.valid">
                        <mat-icon>vpn_key</mat-icon>
                        Change Password
                    </button>
                </div>
            </form>
        </mat-card-content>
    </mat-card>

    <!-- Theme Toggle Section -->
    <mat-card class="settings-card">
        <mat-card-header>
            <mat-card-title>
                <mat-icon>palette</mat-icon>
                Appearance
            </mat-card-title>
        </mat-card-header>
        <mat-card-content>
            <div fxLayout="row" fxLayoutAlign="space-between center">
                <div fxLayout="column">
                    <h3>Theme</h3>
                    <p class="theme-description">
                        {{ isDarkTheme ? 'Dark theme is enabled' : 'Light theme is enabled' }}
                    </p>
                </div>
                <button mat-raised-button [color]="isDarkTheme ? 'accent' : 'primary'" (click)="toggleTheme()">
                    <mat-icon>{{ isDarkTheme ? 'light_mode' : 'dark_mode' }}</mat-icon>
                    {{ isDarkTheme ? 'Switch to Light' : 'Switch to Dark' }}
                </button>
            </div>
        </mat-card-content>
    </mat-card>

</div>