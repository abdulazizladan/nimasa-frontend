<div 
  fxLayout="row" 
  fxLayout.lt-sm="column"  fxLayoutAlign="start stretch"
  fxLayoutGap="20px"  fxLayoutGap.lt-sm="10px" class="kpi-cards-row"
>

  <mat-card fxFlex class="kpi-card kpi-total">
    <mat-card-title>Total Departments</mat-card-title>
    <mat-card-content>{{ store.totalDepartments() }}</mat-card-content>
  </mat-card>
  <mat-card fxFlex class="kpi-card kpi-active">
    <mat-card-title>Active Units</mat-card-title>
    <mat-card-content>0</mat-card-content>
    </mat-card>
  <mat-card fxFlex class="kpi-card kpi-targets">
    <mat-card-title>Targets Set</mat-card-title>
    <mat-card-content>0</mat-card-content>
    </mat-card>
  <mat-card fxFlex class="kpi-card kpi-performance">
    <mat-card-title>Avg. Performance</mat-card-title>
    <mat-card-content>0</mat-card-content>
    </mat-card>
</div>

<div style="height: 30px;"></div>

<h2 class="table-title">NIMSA Departments Overview</h2>


<table mat-table [dataSource]="dataSource" class="mat-elevation-z4 departments-table">

  <ng-container matColumnDef="code">
    <th mat-header-cell *matHeaderCellDef> Code </th>
    <td mat-cell *matCellDef="let element"> {{element.code}} </td>
  </ng-container>

  <ng-container matColumnDef="name">
    <th mat-header-cell *matHeaderCellDef> Department Name </th>
    <td mat-cell *matCellDef="let element"> {{element.name}} </td>
  </ng-container>

  <ng-container matColumnDef="head">
    <th mat-header-cell *matHeaderCellDef> Head of Department </th>
    <td mat-cell *matCellDef="let element"> {{element.head}} </td>
  </ng-container>

  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
  <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

  <tr class="mat-row" *matNoDataRow>
    <td class="mat-cell" colspan="3">No departments found.</td>
  </tr>
</table>

@if (store.isLoading()) {
  <mat-progress-bar mode="query"></mat-progress-bar>
}

@if (store.error()) {
  <div class="error">{{ store.error() }}</div>
}