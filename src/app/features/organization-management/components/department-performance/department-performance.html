<div class="performance-container">
  <mat-toolbar>
    <button mat-icon-button (click)="goBack()">
      <mat-icon>arrow_back</mat-icon>
    </button>
    <span>Department Performance</span>
  </mat-toolbar>

  <div class="content">
    <div class="metrics-grid">
      <!-- Ongoing Tasks -->
      <mat-card class="metric-card">
        <mat-card-header>
          <mat-card-title>Ongoing Tasks</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <div class="value">{{ metrics.ongoingTasks.value }}</div>
          <div class="comparison" [class.positive]="metrics.ongoingTasks.trend === 'up'">
            <mat-icon>{{ metrics.ongoingTasks.trend === 'up' ? 'arrow_upward' : 'arrow_downward' }}</mat-icon>
            {{ metrics.ongoingTasks.change }}% vs last month
          </div>
        </mat-card-content>
      </mat-card>

      <!-- Performance Rating -->
      <mat-card class="metric-card">
        <mat-card-header>
          <mat-card-title>Performance Rating</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <div class="value">{{ metrics.performanceRating.value }}</div>
          <div class="comparison" [class.positive]="metrics.performanceRating.trend === 'up'">
              <mat-icon>{{ metrics.performanceRating.trend === 'up' ? 'arrow_upward' : 'arrow_downward' }}</mat-icon>
            {{ metrics.performanceRating.change }}% vs last month
          </div>
        </mat-card-content>
      </mat-card>

      <!-- Outstanding Tasks -->
      <mat-card class="metric-card">
        <mat-card-header>
          <mat-card-title>Outstanding Tasks</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <div class="value">{{ metrics.outstandingTasks.value }}</div>
          <div class="comparison" [class.positive]="metrics.outstandingTasks.trend === 'down'"> <!-- Down is good here -->
              <mat-icon>{{ metrics.outstandingTasks.trend === 'up' ? 'arrow_upward' : 'arrow_downward' }}</mat-icon>
            {{ Math.abs(metrics.outstandingTasks.change) }}% vs last month
          </div>
        </mat-card-content>
      </mat-card>
    </div>

    <mat-card class="chart-card">
        <mat-card-header>
            <mat-card-title>Performance Trend</mat-card-title>
        </mat-card-header>
        <div class="chart-wrapper">
            <canvas baseChart
                    [data]="lineChartData"
                    [options]="lineChartOptions"
                    [legend]="lineChartLegend"
                    [type]="'line'">
            </canvas>
        </div>
    </mat-card>
  </div>
</div>
